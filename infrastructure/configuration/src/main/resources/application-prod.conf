# ===========================================
# kt-terminal 生产环境配置
# ===========================================

app {
  environment = "prod"
  
  # 生产环境服务器配置
  server {
    port = ${?SERVER_PORT}
    host = ${?SERVER_HOST}
    
    # 生产环境CORS配置（更严格）
    cors {
      allowedOrigins = ["https://terminal.example.com"]
      allowedMethods = ["GET", "POST", "PUT", "DELETE"]
      allowedHeaders = ["Content-Type", "Authorization"]
      allowCredentials = true
    }
  }
  
  # 生产环境数据库配置（使用环境变量）
  database {
    url = ${?DATABASE_URL}
    driver = ${?DATABASE_DRIVER}
    username = ${?DATABASE_USERNAME}
    password = ${?DATABASE_PASSWORD}
    poolSize = ${?DATABASE_POOL_SIZE}
    connectionTimeout = 60000
    maxLifetime = 3600000
  }
  
  # 生产环境事件总线配置
  eventBus {
    bufferSize = 5000
    enableMetrics = true
    enableDeadLetterQueue = true
    deadLetterQueueCapacity = 500
    maxRetries = 5
  }
  
  # 生产环境日志配置
  logging {
    level = "INFO"
    file {
      enabled = true
      path = "/var/log/kt-terminal/application.log"
      maxFileSize = "100MB"
      maxHistory = 90
    }
  }
  
  # 生产环境监控配置
  monitoring {
    enabled = true
    
    metrics {
      enabled = true
      exportInterval = 30000
      endpoints = ["jvm", "system", "process", "custom"]
    }
    
    health {
      enabled = true
      checkInterval = 60000
      endpoints = ["disk", "database", "memory", "cpu"]
    }
  }
}