ktor {
    deployment {
        port = 8080
        port = ${?PORT}
    }
    application {
        modules = [ org.now.terminal.ApplicationKt.module ]
    }
}

terminal {
    # 默认shell类型 - Linux环境下最常用的是bash
    defaultShellType = "bash"
    
    # 终端默认尺寸
    defaultSize {
        columns = 80
        rows = 24
    }
    
    # 默认工作目录配置 - 使用用户主目录，支持环境变量
    defaultWorkingDirectory = "."

    # 会话超时时间（毫秒）
    sessionTimeout = 1800000 # 30分钟
    
    # Shell类型配置 - Linux环境下最常用的shells
    shells {
        # 1. Bash - Linux默认shell，最常用
        bash {
            # 在真实Linux环境下使用直接路径
            command = ["/bin/bash", "-l"]
            # 在Windows环境下通过WSL运行Linux bash
            # command = ["wsl.exe", "-e", "bash", "-l"]
            # 可选：shell级别的工作目录，不配置则使用defaultWorkingDirectory
            # workingDirectory = "/home/longwang"  # 真实Linux环境下的主目录
            # workingDirectory = "/mnt/d/Users/long.wang" # Windows环境下通过WSL的主目录
            # 可选：shell级别的终端尺寸，不配置则使用defaultSize
            # size {
            #     columns = 100
            #     rows = 30
            # }
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 2. Sh - 标准shell，通常是bash或dash的链接
        sh {
            # 在真实Linux环境下使用直接路径
            command = ["/bin/sh"]
            # 在Windows环境下通过WSL运行Linux sh
            # command = ["wsl.exe", "-e", "sh"]
            # 可选：shell级别的工作目录，不配置则使用defaultWorkingDirectory
            # workingDirectory = "/home/user"  # 真实Linux环境下的主目录
            # 可选：shell级别的终端尺寸，不配置则使用defaultSize
            # size {
            #     columns = 80
            #     rows = 24
            # }
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 3. Zsh - 功能丰富的shell，许多开发者的选择
        zsh {
            # 在真实Linux环境下使用直接路径
            command = ["/bin/zsh", "-l"]
            # 在Windows环境下通过WSL运行Linux zsh
            # command = ["wsl.exe", "-e", "zsh", "-l"]
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 4. Fish - 用户友好的shell，带有自动补全功能
        fish {
            # 在真实Linux环境下使用直接路径
            command = ["/usr/bin/fish"]
            # 在Windows环境下通过WSL运行Linux fish
            # command = ["wsl.exe", "-e", "fish"]
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 5. Tcsh - C shell变体，某些系统仍在使用
        tcsh {
            # 在真实Linux环境下使用直接路径
            command = ["/bin/tcsh", "-l"]
            # 在Windows环境下通过WSL运行Linux tcsh
            # command = ["wsl.exe", "-e", "tcsh", "-l"]
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # Windows-specific shells - 可以注释掉在纯Linux环境下
        # cmd {
        #     command = ["cmd.exe"]
        #     workingDirectory = "D:\\Users\\long.wang"
        #     environment {
        #         TERM = "xterm-256color"
        #     }
        # }
        # powershell {
        #     command = ["powershell.exe"]
        #     workingDirectory = "D:\\Users\\long.wang"
        #     environment {
        #         TERM = "xterm-256color"
        #     }
        # }
    }
}